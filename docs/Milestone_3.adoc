==== 2.1.1 Domain Rough Sketch (Raw Stories)
=== Raw Story: Losing Track During Supersets

Gym-Goer recounts:
"I started a superset of dumbbell curls at 25 pounds and tricep pushdowns at 40 pounds. I wanted to complete three sets of each, but halfway through the first set of curls, I realized I hadn’t kept track of the warm-up reps.

The first few reps felt fine, but by the fourth rep, my forearms burned, and I paused because I couldn't tell which set I was on. My grip felt shaky, and my breathing grew uneven.

On the next pushdown set, I tried to focus on the motion, but I kept losing focus and thinking about the earlier curls. I paused briefly, then started again. My arms tightened, and the movement became slower and less controlled.

I attempted another curl set, but my grip slipped slightly, and the movement became uneven. I lowered the dumbbells and stepped away, frustrated that I had lost track halfway through the session.

I moved on to a lighter machine row just to finish the workout, feeling mentally drained and unfocused."

=== Raw Story: Overreaching on Deadlift Day

Athlete recounts:
"I started my deadlift session at 185 pounds, I wanted to push a little harder than last week. My legs and back were already sore, but I felt determined to lift more.

The first two reps felt manageable, but by the third, I noticed my lower back tightening. My grip started slipping slightly on the bar, and my breathing became uneven.

On rep four, I paused to reset my stance. My shoulders felt stiff, and the bar path wasn’t straight. I paused for a moment before continuing, then I tried one more lift.

The next rep felt unstable, and I almost lost balance. I stopped immediately, feeling a sharp tension in my lower back. I stepped away from the bar, frustrated after feeling the sharp tightness in my lower back.

I decided to finish with lighter accessory exercises, feeling both sore and mentally exhausted."

=== Raw Story: Forgetting Previous Weights

Gym-Goer recounts:
"I started bench press at 95 pounds. I hadn’t tracked my previous workouts well, so I wasn’t sure if this was my last working set or the one before.

The first few reps felt heavier than expected. I paused mid-set, I couldn't remember the previous weight I used. My breathing grew shallow as my focus drifted away from the lift.

On rep five, my elbows flared slightly, and my chest felt unusually fatigued. I paused again to think about whether I should continue with the same weight or adjust.

I tried one more rep, but the bar path wobbled slightly, and I felt my strength fading. I stopped early and moved to dumbbell flyes at a lighter weight, feeling frustrated because the session felt disorganized."

=== Raw Story: Cardio With Side Stitches

Athlete recounts:
"I started on the treadmill at 5.5 mph. The first few minutes felt okay, but by minute three, I noticed a side stitch forming and my calves tightening. My breathing became shallow and irregular.

I tried to continue, but each step made the stitch worse, and my legs felt heavier with every stride. I slowed to a walk and held the rails for a few seconds, waiting to see if the stitch would ease.

I resumed jogging after a brief pause, but the pain returned almost immediately. My steps felt flat, and my feet struck the belt harder than usual.

I stopped early, feeling frustrated that I couldn’t maintain a steady pace. I walked slowly for a few minutes to recover, the tightness and heaviness where limiting my session."

=== Raw Story: Confused by Complex Routine

Gym-Goer recounts:
"I started with incline dumbbell press at 65 pounds. My routine alternates between different rep schemes each week, and I paused, unsure which rep scheme I was supposed to follow.

The first few reps felt awkward, and I paused between reps trying to remember the plan. My shoulders burned quicker than expected, and my grip felt unstable.

On rep five, my right arm shook slightly, I wasn't sure if I was doing the right number of reps. I paused again, trying to recall the proper sequence.

I tried one more rep, but the weight felt heavier than expected, and my arms trembled. I stopped early and moved to lateral raises, feeling mentally tired from the confusion."

==== 2.1.2 Terminology (Concepts Derived From Raw Stories)

=== Concept: Rep

Definition:
A single, complete motion of an exercise, such as lifting and lowering a weight.

Observed in raw stories:

“The first few reps felt fine…”

“On rep five, my elbows flared slightly…”

“The first two reps felt manageable…”

=== Concept: Set

Definition:
A group of consecutive reps performed without significant rest.

Observed in raw stories:

“I wanted to complete three sets of each…”

“I attempted another curl set…”

“I started my deadlift session… the first two reps…”

=== Concept: Grip

Definition:
The way the hands hold a weight or equipment during an exercise.

Observed in raw stories:

“My grip felt shaky…”

“My grip slipped slightly on the bar…”

“My grip started slipping.”

=== Concept: Bar Path

Definition:
The trajectory the barbell follows during a lift.

Observed in raw stories:

“The bar path wasn’t straight.”

“The bar path wobbled slightly…”

=== Concept: Tightness

Definition:
A physical sensation of tension in muscles during an exercise.

Observed in raw stories:

“My calves tightening…”

“I noticed my lower back tightening…”

“My arms tightened…”

=== Concept: Fatigue

Definition:
A decrease in muscle ability to continue producing force during an exercise.

Observed in raw stories:

“My chest felt unusually fatigued.”

“By the fourth rep, my forearms burned…”

“My legs felt heavier with every stride.”

=== Concept: Form

Definition:
The physical technique used to perform an exercise, including posture and movement quality.

Observed in raw stories:

“The movement became uneven…”

“My elbows flared slightly…”

“My right arm shook slightly…”

=== Concept: Pause

Definition:
A temporary stop in movement or exercise to regain control or reassess.

Observed in raw stories:

“I paused because I couldn’t tell which set I was on.”

“I paused to reset my stance.”

“I paused between reps…”

=== Concept: Side Stitch

Definition:
A sharp abdominal or rib-area pain that occurs during running or cardio.

Observed in raw stories:

“I noticed a side stitch forming…”

“but each step made the stitch worse...”

=== Concept: Balance

Definition:
The ability to maintain control and stability during a movement.

Observed in raw stories:

“I almost lost balance.”

“My steps felt flat…”

“the movement became uneven…”

=== Concept: Load

Definition:
The amount of resistance used in an exercise, typically measured in pounds.

Observed in raw stories:

“I started bench press at 95 pounds.”

“I started my deadlift session at 185 pounds.”

“I started incline dumbbell press at 65 pounds.”

=== Concept: Breathing Pattern

Definition:
The rhythm and control of breathing during exercise.

Observed in raw stories:

“My breathing became shallow and irregular.”

“My breathing grew uneven…”

“My breathing became uneven.”

=== Concept: Foot Strike

Definition:
How the foot lands during running or treadmill exercise.

Observed in raw stories:

“My steps felt flat…”

“My feet struck the belt harder than usual…”

“Each step made the stitch worse…”

=== Concept: Loss of Focus

Definition:
A moment during training when attention drifts away from the exercise, leading to interruptions, pauses, or inconsistent movement.

Observed in raw stories:

“I kept losing focus and thinking about the earlier curls.”

“I paused mid-set, I couldn’t remember the previous weight I used.”

“My focus drifted away from the lift.”

=== Concept: Decision to Stop Early

Definition:
A point during an exercise where the athlete ends the set or movement before completion due to physical cues such as tightness, instability, or increasing difficulty.

Observed in raw stories:

“I stopped early and moved to dumbbell flyes…”

“I stopped immediately when the tension in my lower back increased.”

=== Concept: Form Instability

Definition:
Irregular, uneven, or uncontrolled movement patterns during an exercise that indicate loss of technique quality.

Observed in raw stories:

“The movement became slower and less controlled.”

“The bar path wobbled slightly…”

“My right arm shook slightly…”

==== 2.1.4 Events / Behaviors / Functions

**=== Pattern: Losing Control During Movement

(Observed in multiple stories)**

Events & Behaviors (with raw-story quotes)

GripSlips

“my grip slipped slightly”

BarDoesNotMoveStraight

“the bar path wasn’t straight”
“the bar path wobbled slightly”

MovementSlowsUnexpectedly

“the movement became slower”

ArmShakesDuringLift

“my right arm shook slightly”

FootStrikeBecomesFlat

“my feet struck the belt harder than usual”

Domain Functions (based on actual athlete reactions)

steadyGrip() → GripResult
Justified by: multiple attempts to regain hold after grip becomes shaky.

slowDownMovement() → MovementStatus
Justified by: athlete reduces pace when movement becomes unstable.

resetMovementPath() → PathStatus
Justified by: athlete pauses and resets stance when bar drifts.

**=== Pattern: Fatigue and Tightening

(Repeated in multiple stories)**

Events & Behaviors (with quotes)

ForearmsBurn

“my forearms burned”

LowerBackTightens

“my lower back tightening”

CalvesTighten

“my calves tightening”

BreathingBecomesShallow

“my breathing became shallow and irregular”

SideStitchAppears

“a side stitch forming”

Domain Functions (matching actions taken)

pauseBecauseOfTightness() → RecoveryState
Justified by:

“I slowed to a walk and held the rails…”

adjustEffortDueToFatigue() → EffortLevel
Justified by:

“the movement became slower and less controlled”

stopWhenPainIncreases() → StopOutcome
Justified by:

“I stopped immediately when the tension increased”

**=== Pattern: Losing Track or Forgetting

(Seen in multiple stories)**

Events & Behaviors (with quotes)

RepCountLost

“I couldn’t tell which set I was on”

WorkingWeightUncertain

“I wasn’t sure if this was my last working set”

RepPlanUnclear

“unsure which rep scheme I was supposed to follow”

AttentionShiftsAway

“my focus drifted away from the lift”

PauseToRecollect

“I paused again to think”

Domain Functions (as actually done by athlete)

pauseToRecollectPlan() → PlanStatus
Justified by:

“paused between reps trying to remember”

checkWeightAgain() → WeightStatus
Justified by:

“I paused mid-set and checked the plates again”

restartSetAfterConfusion() → SetStatus
Justified by:

“I paused briefly, then started again”

**=== Pattern: Stopping or Slowing Mid-Session

(Repeated in 4 out of 5 stories)**

Events & Behaviors (with quotes)

AthleteSlowsDown

“I slowed to a walk”

AthletePausesSet

“I paused mid-set”

SetEndsBecauseOfInstability

“I stopped early”

DecisionToStopAfterPain

“I stopped immediately when the tension increased”

SwitchToLighterMovement

“I moved to dumbbell flyes at a lighter weight”

Domain Functions (matching next-step actions)

slowDownPace() → PaceLevel

stopSetEarly() → SetOutcome

switchToLighterMovement() → ExerciseChoice

**=== Pattern: Changing Exercise Mid-Session

(from 4 out of 5 stories)**

Events & Behaviors

SwitchToAccessoryExercise

“I decided to finish with lighter accessory exercises”

TransitionToMachine

“I moved on to a lighter machine row”

ChangeExerciseAfterConfusion

“I stopped early and moved to lateral raises”

ChangeExerciseAfterInstability

“I moved to dumbbell flyes”

Domain Functions

changeExercise() → Exercise

chooseEasierExercise() → Exercise

transitionToMachineWork() → Exercise

==== 2.1.5 Function Signatures

=== Form Instability Patterns
function stabilizeForm(form: FormState): FormState
function correctBarPath(path: BarPath): BarPath
function adjustGrip(grip: GripState): GripState

=== Fatigue & Sensation Response Patterns
function respondToTightness(area: MuscleGroup): Adjustment
function manageSideStitch(stitch: Sensation): Pace
function regulateBreathing(breath: BreathingPattern): BreathingPattern

=== Loss of Focus & Cognitive Breaks
function recoverRepCount(state: SetState): SetState
function recallPreviousLoad(log: LoadRecord): WeightLoad
function reorientRepScheme(routine: RoutinePattern): RoutinePattern

=== Pacing & Stopping Decisions
function pauseSet(set: Set): Set
function endSetEarly(set: Set): SetOutcome
function resetStance(stance: Stance): Stance
function adjustPace(pace: Pace): Pace

=== Load & Exercise Adjustment Patterns
function reduceLoad(load: WeightLoad): WeightLoad
function switchExercise(current: Exercise): Exercise
function transitionToAccessory(exercise: Exercise): Exercise

==== 2.2.2 Personas
* Alex, the Beginner:
  ** Background and daily habits:
    Alex is a 28-year-old office worker from Miami, Florida. He works long hours at a marketing firm and often ends the day feeling
    drained. Outside of working hours, he enjoys cooking simple meals, listens to podcasts about technology and entrepreneurship, and occasionally
    playing casual mobile games to relax. Alex is new to fitness and often feels overwhelmed and feels out of place in a public gym, unsure of where to
    start or whether he is making any progress. His primary goal is to build a consistent workout habit to improve his health, energy levels,
    and overall well-being, as he feels sluggish from sitting all day at the office. His colleagues discussing fitness apps during lunch influences his desire for a polished, engaging user experience, which he might feel confident enough to share once he sees progress. Alex is motivated by music and likes to listen to high-energy playlists on Spotify during workouts to stay focused. He is curious, eager to learn, and wants clear guidance to help him feel confident and prevent unnecessary injuries as he begins his fitness journey.

  ** Motivations and goals:
   Alex isn't just trying to "build a habit." He wants to improve his energy levels to be more effective at his marketing job and eventually perhaps start his own business. 


  ** Pain points and needs:
The team will realize the app isn't just a fitness tool, but a stepping stone to entrepreneurial success and better time management, making features like progress visualization extremely important for tracking overall life progression, not just reps.
Gym Anxiety, this suggests he would benefit from a "solo mode" or privacy settings initially.
Alex’s interest in cooking simple meals suggests he might appreciate a section in the app with quick, easy-to-follow healthy recipes that fit into his busy evenings.
Alex interest in listening to music during workouts present expectation of seamless integration with existing tools like Spotify or other tools.
    Current fitness apps only log data but fail to provide engaging feedback or build motivation. Alex struggles to understand fitness
    terminology and is unsure if his training is balanced, leading to a fear of developing imbalances or injuring himself by overdoing
    certain exercises. Additionally, he prefers features that fit into busy, irregular schedules and offer clear visual rewards. 
    He needs an intuitive, encouraging, and gamified guide to help him build a foundation.

* Diego, the Competitive Gamer:
  ** Background and daily habits:
    Diego is a 22-year-old computer science student from San Juan, Puerto Rico. He spends much of his free time gaming, streaming, or
    coding with friends online. He loves competitive environments and progression systems, whether it’s climbing ranked ladders in his
    favorite games or improving his game stats. Outside of gaming Diego enjoys testing with his friends who have more strength, endurance,
    or who can make the best dish, but he feels weaker than them in physical challenges. 
His feeling of being physically weaker than friends isn't just about gym stats; it's about social confidence and status within his friend group. Looking information online he stumbled across how improving physical strength might also be linked to improving focus for long coding sessions and started to consider going to the gym. 
Although he joined a gym last semester, he quickly
    lost motivation because he doesn’t get the feeling of achieving, often translating to a feeling of wasted time.
  ** Motivations and goals:
    Diego wants a fitness app that makes working out feel like leveling up in a video game. He is motivated by points, rankings, and visual
    progress bars that show him getting stronger in real time. His main goal is to stay consistent by turning workouts into daily “missions”
    that reward effort and let him compete with friends. He also wants to improve his physical strength so he can win physical challenges against his friends.
  ** Pain points and needs:
The app’s competitive elements need to be robust enough to help him earn bragging rights, not just personal points.
Competition against his friends is a major motivator. The app needs highly developed social challenge features, perhaps customizable duels or guild-like team goals, not just a simple leader board.
    Current gym apps feel lifeless to him; they only track sets and reps without giving a sense of reward or excitement. He struggles with
    accountability when training alone and needs an app that transforms progress into a fun, measurable system that keeps him hooked like a
    game. He also wants an app that provides clear, visual indicators of his improvements as if he is improving stats in a game.
His computer science background suggests he is comfortable with technology and likely expects a sophisticated, bug-free, and well-designed interface, not a basic app. 

* Sarah, the Consistent:
  ** Background and daily habits:
    Sarah is a 32 year old teacher from Austin, Texas, who has maintained a regular gym routine for the past two years. She teaches high school
    health and wellness classes, and her curiosity about nutrition, fitness, and exercise science allows her to apply what she learns both in school
    and in her personal life. She is knowledgeable about basic exercises and tracks her sets and reps diligently in a notes app. She enjoys the discipline
    of training and typically works out early in the morning before school to maintain consistency. Outside the gym and school, Sarah enjoys reading about
    nutrition and wellness, trying out new healthy recipes, and occasionally attending local fitness classes to expand her knowledge. As a busy teacher, time is precious and likes to plan ahead during the week. She secretly allows
    herself a cheat day every two weeks, indulging in foods like Burger King or fully loaded pizzas. As a health teacher, hitting a plateau has been slightly embarrassing or frustrating for Sarah because she feels she "should" know better. She suspects she may be neglecting certain muscle groups but lacks the data to confirm it.
  ** Motivations and goals:
Her goal isn't just about lifting heavier weights; it's about a continuous quest for knowledge and mastery of health and wellness.
    Sarah wants to optimize her training to overcome her current progress plateau. She is motivated by measurable results and personal challenges,
    using data to track improvements and hold herself accountable. Her main goal is to ensure balanced development across all muscle groups while adding a new layer of challenge and enjoyment to her well-established fitness routine, beyond simply lifting heavier weights.
 ** Pain points and needs:
    Sarah has hit a progress plateau and feels her workouts have become repetitive. She suspects she may be neglecting certain muscle groups
    but lacks the data to confirm it. Her current tracking method is fragmented and offers no actionable insights. She finds most fitness apps
    too simplistic and not designed for someone with her experience and discipline. She needs a tool that provides detailed, data driven analytics
    on her performance and muscle development.
Her structured schedule suggests the need for features that allow for advanced planning, such as a robust weekly or monthly workout scheduler that can send calendar reminders to her work schedule.

* Marcos, the Motivator:
  ** Background and daily habits:
    Marcos is a 24-year-old graduate student from Chicago, Illinois, who treats fitness as a social activity. He works out with a close-knit
    group of friends, relying on their presence for accountability and friendly competition. Marcos and his friends constantly challenge
    each other to show up and push harder. He often shares workout milestones on social media like, Instagram but wishes there were a more
    integrated way to track his progress and stay connected with his friends’ achievements. Outside the gym, Marcos balances his studies, 
    part-time tutoring, and social life. He enjoys attending local fitness events, trying new workout classes, and exploring healthy restaurants
    with friends. He is curious about sports science and occasionally reads articles on training techniques and recovery methods. Although
    disciplined, he sometimes struggles to stay consistent when friends are unavailable or during particularly busy weeks, which makes him
    value social accountability even more. Marcos also enjoys mentoring others in fitness and often motivates classmates or peers to adopt
    healthier habits. He sees exercise not just as a personal goal but as a way to connect with others, challenge himself, and maintain
    a sense of structure in his life.

  ** Motivations and goals:
    Marcos primary motivation is community, accountability, and shared achievement. He wants an app that strengthens his workout group’s
    connection by making it easy to share progress, celebrate each other’s accomplishments, and maintain streaks together. He thrives in
    a positive, friendly competitive environment that emphasizes consistency and effort rather than solely focusing on raw strength.
    Beyond personal improvement, Marcos also wants to inspire and motivate others, helping peers adopt healthier habits while enjoying
    a sense of community and shared challenge.
  ** Pain points and needs:
    Marcos already uses Instagram for sharing. The app needs highly polished, shareable visual summaries of achievements that are optimized for social platforms, leveraging his habit to attract new users and enhance existing engagement. There is no seamless way to create a private leaderboard with just his friends to track consistency, celebrate milestones, and encourage each other. He struggles to stay motivated when his workout group is unavailable and wants a platform that fosters a small, supportive community centred around collective growth. The pain of friends being unavailable isn't just about missing a workout; it’s about feeling isolated. Mentoring others in fitness gives Marcos a sense of purpose. The app could integrate a "mentor mode" or a public "coach profile" where he can track the progress of those he mentors, reinforcing his role as a leader and motivator. His focus on positive competition and motivation suggests that gamification should prioritize "praise" and "high-fives" alongside raw ranking data. Features might include a robust set of positive reaction emojis or automated encouragement messages.


==== 2.2.3 Domain Requirements
===== Principles
* Fitness as a Journey of Personal Progress
 ** Improvement in strength, endurance, and consistency is a core driver of motivation. The system shall provide a mechanism with clear,
 quantifiable metrics and visual representations of a user's progress over time.
 ** A balanced approach targeting all major muscle groups is essential for preventing injury and achieving a well-rounded physique. 
 The system shall provide a mechanism that facilitate and encourage awareness of training distribution across the body.

* Engagement with Fitness Training
 ** Long-term consistency requires more than initial novelty. The system shall implement a layered reward structure (e.g., XP, achievements, ranks) that provides continuous feedback and celebrates milestones of varying difficulty.
 ** Fitness journeys can be reinforced through community. The system shall provide a mechanism for positive social comparison and mutual support that focuses on shared effort and consistency.

===== Functional Requirements
* Workout Logging
 **The system shall provide an interface for the user to log an exercise by specifying the exercise name, weight lifted, number of sets, and number of repetitions per set.

* Progress Tracking
 ** The system shall calculate and display a historical graph of the total training volume (weight × sets × reps) 
    for each muscle group over a user-selectable time period.
** The system shall provide a mechanism that tracks and highlights new Personal Records (PRs) when a user logs a set with a higher weight for a given exercise than any previous set.
** The system shall provide a mechanism that suggest alternative exercises during the logging process if the user's current selection disproportionately targets an already dominant muscle group based on the "Muscle Balance Score".
** The system shall provide a mechanism for the users to input goals based on specific timeframes and automatically generate a structured, periodized workout plan toward that goal.
** The system shall provide a mechanism for users to publicly share "milestone posts" when achieving significant achievements to facilitate positive social reinforcement.
** The system shall provide a mechanism that detects a performance plateau, the system shall provide automated suggestion to changes in repetition ranges.


* Gamification System
** The system shall provide a mechanism that assigns a user a rank (Bronze, Silver, Gold, etc.) for each muscle group, calculated based on the total historical training volume and PRs for that muscle group.
** The system shall provide a mechanism that awards users experience points (XP) for completing workouts and achieving milestones.

==== 2.3 Architecture Overview

The architecture of Gamified Gym is organized around a small set of conceptual subsystems that mirror the domain model. 
Each subsystem owns specific aggregates and repositories and is responsible for a distinct part of the athlete’s journey.

Subsystem boundaries are defined by:

* which **aggregates** and **domain concepts** they own,
* which **invariants** they protect,
* and which **information they expose** to other subsystems.

The main conceptual subsystems are:

* Training & Sessions
* Progress & Gamification
* Social Motivation
* Athlete Registry

==== 2.3.1 Core Subsystems and Responsibilities

*Training & Sessions Subsystem*

- **Owned aggregates (examples):**
  - `WorkoutSession` (root), with entities like `ExerciseEntry` and `SetEntry`.
- **Responsibility:**
  - Represent the structure and lifecycle of a single training session:
  - Starting, updating, and completing workouts.
  - Enforce invariants related to sets, reps, and exercises.
- **Primary domain functions used/implemented here:**
  - createExercise(name, reps, sets, intensity) → Exercise
  - createSet(reps, weight, intensity) → Set
  - createWorkoutRoutine(exercises, goal) → WorkoutRoutine
  - startWorkoutSession(athlete) → WorkoutSession
  - selectExercise(session, exercise) → UpdatedSession
  - applyIntensity(exercise, intensity) → Exercise
  - completeSet(exercise, reps, weight) → CompletedSet
  - recordRest(session, duration) → RestPeriod
  - endWorkoutSession(session) → Summary
- **Exposed information:**
  - Summary of completed sessions (volume, duration, date).
  - Domain events such as `WorkoutCompleted`, `CompletedSet`, and `NewPersonalRecord` emitted when completeSet or endWorkoutSession runs.

*Progress & Gamification Subsystem*

- **Owned aggregates (examples):**
  - `AthleteProgress` (root), containing `XP`, `Level`, and collections of `Achievement`.
- **Responsibility:**
  - Track the long-term evolution of the athlete: accumulated XP, level, streaks, and achievements.
  - Apply progression rules when new training evidence arrives.
- **Primary domain functions used/implemented here:**
  - updateProgress(athlete, metrics) → ProgressLog
  - awardMilestone(athlete, achievement) → UpdatedProgress
  - updateMuscleBalance(athlete, metrics) → MuscleBalanceScore
  - detectPlateau(athlete, history) → PlateauStatus
  - planworkoutSession(athlete, goal) → WorkoutSession 
- **Dependencies:**
  - Depends on Training & Sessions for events (CompletedSet, WorkoutCompleted) and input to updateProgress.
- **Exposed information:**
  - Current XP, level, streak status.
  
*Social Motivation Subsystem*

- **Owned aggregates (examples):**
  - `SocialBoard` or `Leaderboard`, with entities like `LeaderboardEntry` linked to `AthleteId`.
- **Responsibility:**
  - Provide social comparison and accountability: leaderboards, rankings, and activity views that relate athletes.
- **Primary domain functions used/implemented here:**
  - awardMilestone(athlete, achievement) → UpdatedProgress 
  - updateProgress() → outputs consumed to compute rankings and XP-based ordering
  - (Consumes Progress & Gamification outputs to build social views)
- **Dependencies:**
  - Depends on Progress & Gamification for metrics such as XP, level, achievement counts.
  - May also depend on Training & Sessions for recent activity summaries used in social feeds.
- **Exposed information:**
  - Ordered rankings of athletes according to defined criteria (XP, streaks).
  - Aggregated social views like “friends recent workouts” and shareable milestone posts.

*Athlete Registry Subsystem*

- **Owned aggregates (examples):**
  - `Athlete` as the root entity representing a person who trains.
- **Responsibility:**
  - Represent stable information about each athlete that is needed by other subsystems (identifier, basic profile, configuration relevant to training).
  - Provide the canonical `AthleteId` used across the model.
- **Primary domain functions used/implemented here:**
  - startWorkoutSession(athlete) → WorkoutSession (entry point uses AthleteId)
  - planworkoutSession(athlete, goal) → WorkoutSession (when generating plans tied to athlete profile)
- **Dependencies:**
  - Conceptually independent of the other subsystems; it does not depend on Training, Progress, or Social.
- **Exposed information:**
  - Identity of athletes (their `AthleteId` and basic attributes) used to associate workouts, progress, and social entries with the correct person.

==== 2.3.2 Boundaries and Information Flows

Subsystem boundaries follow three principles:

1. **Each subsystem owns its aggregates and repositories.**  
   For example, only Training & Sessions modifies `WorkoutSession`, and only
   Progress & Gamification modifies `AthleteProgress`. The functions that create and mutate session data (startWorkoutSession, selectExercise, completeSet, recordRest, endWorkoutSession) are implemented inside Training & Sessions; consumers call updateProgress or awardMilestone but do not directly mutate WorkoutSession.

2. **Information flows from more “concrete evidence” to more “derived views”.**  
   - Training & Sessions provides factual evidence via functions/events:
     - completeSet() and endWorkoutSession() yield CompletedSet, WorkoutSummary, and may generate NewPersonalRecord events.
   - Progress & Gamification derives long-term state by calling updateProgress(athlete, metrics) when it consumes training events. It applies detectPlateau(athlete, history) and updateMuscleBalance(athlete, metrics) to compute suggestions and awards, and uses awardMilestone(...) to persist achievements.
   - Social Motivation builds group-level views (rankings, social boards) by consuming outputs from updateProgress and awardMilestone to produce leaderboards and milestone posts.

3. **Dependencies are directional and explicit.**  
   - *Progress & Gamification depends on Training & Sessions*: Progress & Gamification consumes CompletedSet and WorkoutCompleted events produced by startWorkoutSession / completeSet / endWorkoutSession and then runs updateProgress(athlete, metrics). It does not modify WorkoutSession directly.
   - *Social Motivation depends on Progress & Gamification (and sometimes Training)*: Social Motivation reads XP, levels, and achievement counts produced by updateProgress and awardMilestone to compute rankings and social feeds.
   - *All subsystems reference Athlete Registry*: Training & Sessions, Progress & Gamification, and Social Motivation associate their aggregates with `AthleteId` from Athlete Registry, but the Athlete Registry itself does not depend on any of them.

This keeps subsystems aligned with the domain model: each one is responsible for a specific part of the athlete’s journey and owns the aggregates that implement that responsibility.

==== 2.3.3 Conceptual Architecture Diagram

The diagram below illustrates the conceptual boundaries and dependency directions between subsystems. Arrows indicate which subsystem **depends on** another and what kind of information it consumes.

image::img/Software_Architecture.png[Architecture overview of core subsystems,align="center"]

